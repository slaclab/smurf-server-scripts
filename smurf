#! /usr/bin/env python3

"""
This is the main executable, which just calls docker.
"""

import os
import argparse
import smurf_docker

def list_dirs():
    ignore = ['__pycache__', '.git', 'setup']
    services = []
    for f in os.listdir('.'):
        if os.path.isdir(f) and not f in ignore:
            services.append(f)

    return services

parser = argparse.ArgumentParser()
parser.add_argument('command', choices = ['start', 'stop', 'restart', 'logs', 'attach', 'build'])
parser.add_argument('service', choices = list_dirs())

args = parser.parse_args()
service = args.service

if args.command == 'start':
    smurf_docker.start(service)

elif args.command == 'stop':
    smurf_docker.stop(service)

elif args.command == 'restart':
    smurf_docker.restart(service)

elif args.command == 'attach':
    smurf_docker.attach(service)

elif args.command == 'logs':
    smurf_docker.logs(service)

elif args.command == 'build':
    smurf_docker.build(service)
